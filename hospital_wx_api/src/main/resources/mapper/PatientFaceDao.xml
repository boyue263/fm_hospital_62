<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hospital.wx.dao.PatientFaceDao">
    <select id="checkFaceAuthRecordForToday" parameterType="Map" resultType="java.lang.Integer">
        SELECT a.id AS id
        FROM patient_face_auth a
                 JOIN patient_user_info c ON a.patient_card_id = c.id
        WHERE c.user_id = #{userId}
          AND a.date = STR_TO_DATE('${today}', '%Y-%m-%d')
    </select>
</mapper>
